<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Cesium Google 3D Tiles + Truck</title>
  <link href="https://cesium.com/downloads/cesiumjs/releases/1.131/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
  <script src="https://cesium.com/downloads/cesiumjs/releases/1.131/Build/Cesium/Cesium.js"></script>
</head>
<body style="margin:0; overflow:hidden;">
  <div id="cesiumContainer" style="width:100%; height:100vh;"></div>
  <script type="module">
    const viewer = new Cesium.Viewer("cesiumContainer", {
      timeline: false,
      animation: false,
      sceneModePicker: false,
      baseLayerPicker: false,
      geocoder: Cesium.IonGeocodeProviderType.GOOGLE,
      globe: false,
    });

    viewer.scene.skyAtmosphere.show = true;

    try {
      const tileset = await Cesium.createGooglePhotorealistic3DTileset({
        onlyUsingWithGoogleGeocoder: true,
      });
      viewer.scene.primitives.add(tileset);
    } catch (error) {
      console.log(`Error loading Photorealistic 3D Tiles tileset.\n${error}`);
    }

    viewer.scene.camera.setView({
      destination: new Cesium.Cartesian3(
        -2693797.551060477,
        -4297135.517094725,
        3854700.7470414364,
      ),
      orientation: new Cesium.HeadingPitchRoll(
        4.6550106925119925,
        -0.2863894863138836,
        1.3561760425773173e-7,
      ),
    });

    // Load the truck model
    const truckEntity = viewer.entities.add({
      name: "Truck",
      position: Cesium.Cartesian3.fromDegrees(-122.084, 37.422, 0),
      model: {
        uri: "https://raw.githubusercontent.com/CesiumGS/cesium/master/Apps/SampleData/models/CesiumMilkTruck/CesiumMilkTruck.glb",
        scale: 2.0,
      },
    });

    viewer.trackedEntity = truckEntity;
  </script>
</body>
</html>
